{% extends "base.html" %}

{% block title %}{{ page.title }}{% endblock %}

{% block head %}
<meta name="description" content="{{ page.meta_description_optimized if page.meta_description_optimized else page.meta_description }}">
<meta name="keywords" content="{{ ', '.join(page.long_tail_keywords) }}">
<meta property="og:title" content="{{ page.title }}">
<meta property="og:description" content="{{ page.meta_description_optimized if page.meta_description_optimized else page.meta_description }}">
<meta property="og:type" content="article">
<meta property="og:url" content="https://vat-verifizierung.de{{ page.url }}">
<link rel="canonical" href="https://vat-verifizierung.de{{ page.url }}">
<link rel="alternate" hreflang="de-DE" href="https://vat-verifizierung.de{{ page.url }}">
<link rel="alternate" hreflang="x-default" href="https://vat-verifizierung.de{{ page.url }}">

<!-- Breadcrumb Schema for better SERP appearance -->
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position": 1,
      "name": "Home",
      "item": "https://vat-verifizierung.de/"
    },
    {
      "@type": "ListItem",
      "position": 2,
      "name": "VAT Check",
      "item": "https://vat-verifizierung.de/vat-check/"
    },
    {
      "@type": "ListItem",
      "position": 3,
      "name": "{{ page.h1 }}",
      "item": "https://vat-verifizierung.de{{ page.url }}"
    }
  ]
}
</script>

<!-- Schema.org FAQPage -->
<script type="application/ld+json">
{{ page.schema | tojson }}
</script>

<!-- HowTo Schema for better snippets -->
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "HowTo",
  "name": "How to Verify VAT Number for {{ page.h1 }}",
  "description": "Step-by-step guide to verify a VAT number and check business legitimacy",
  "image": "https://vat-verifizierung.de/static/img/vat-check-hero.jpg",
  "prepTime": "PT2M",
  "performTime": "PT5M",
  "totalTime": "PT5M",
  "step": [
    {
      "@type": "HowToStep",
      "position": "1",
      "name": "Collect VAT Details",
      "text": "Gather the company's VAT number, business name, and registered address. This information is usually found on invoices or the company website.",
      "image": "https://vat-verifizierung.de/static/img/step1.jpg"
    },
    {
      "@type": "HowToStep",
      "position": "2",
      "name": "Enter Information",
      "text": "Input the VAT number or company details into VAT Verifizierung verification form.",
      "image": "https://vat-verifizierung.de/static/img/step2.jpg"
    },
    {
      "@type": "HowToStep",
      "position": "3",
      "name": "Instant Verification",
      "text": "Our system checks against VIES database, sanctions lists (OFAC, FSCO, EU), and company registries. Verification completes in seconds.",
      "image": "https://vat-verifizierung.de/static/img/step3.jpg"
    },
    {
      "@type": "HowToStep",
      "position": "4",
      "name": "Review Report",
      "text": "Receive a detailed PDF report with verification results, including VAT status, business details, and risk assessment. Use this for compliance records.",
      "image": "https://vat-verifizierung.de/static/img/step4.jpg"
    }
  ],
  "yield": {
    "@type": "HowToYield",
    "name": "Verified Business Partner Status"
  }
}
</script>

<!-- Schema.org Article -->
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "Article",
  "headline": "{{ page.h1 }}",
  "description": "{{ page.meta_description }}",
  "image": "https://vat-verifizierung.de/static/img/vat-check-hero.jpg",
  "author": {
    "@type": "Organization",
    "name": "VAT Verifizierung"
  },
  "publisher": {
    "@type": "Organization",
    "name": "VAT Verifizierung",
    "logo": {
      "@type": "ImageObject",
      "url": "https://vat-verifizierung.de/static/img/logo.png"
    }
  }
}
</script>
{% endblock %}

{% block content %}
<div class="container">
    <!-- Breadcrumb Navigation -->
    <nav aria-label="breadcrumb" class="mt-3 mb-4">
        <ol class="breadcrumb">
            <li class="breadcrumb-item"><a href="{{ url_for('landing') }}">Home</a></li>
            <li class="breadcrumb-item"><a href="{{ url_for('programmatic.programmatic_sitemap') }}">VAT Check</a></li>
            <li class="breadcrumb-item active">{{ page.h1 }}</li>
        </ol>
    </nav>

    <!-- Hero Section -->
    <div class="row justify-content-center mt-5 mb-5">
        <div class="col-lg-8">
            <h1 class="display-4 mb-4">{{ page.h1 }}</h1>
            <p class="lead text-muted">{{ page.intro_text }}</p>
            
            <!-- CTA Button -->
            <div class="mt-4">
                <a href="{{ url_for('verification.create') }}" class="btn btn-primary btn-lg">
                    <i class="bi bi-check2-circle"></i> {{ page.cta_button }}
                </a>
            </div>
        </div>
    </div>

    <!-- Case Study Section -->
    {% if page.case_study %}
    <div class="row justify-content-center mb-5">
        <div class="col-lg-8">
            <div class="card border-success mb-4">
                <div class="card-header bg-success text-white">
                    <h5 class="mb-0"><i class="bi bi-briefcase"></i> Реальний кейс</h5>
                </div>
                <div class="card-body">
                    <p class="card-text">{{ page.case_study }}</p>
                </div>
            </div>
        </div>
    </div>
    {% endif %}

    <!-- Main Content Section -->
    <div class="row justify-content-center mb-5">
        <div class="col-lg-8">
            <div class="card">
                <div class="card-body">
                    <h2 class="card-title mb-3">Чому VAT Verifizierung?</h2>
                    <ul class="list-group list-group-flush">
                        <li class="list-group-item">
                            <i class="bi bi-lightning-charge text-warning"></i> Результат в під 5 секунд
                        </li>
                        <li class="list-group-item">
                            <i class="bi bi-shield-check text-success"></i> Пряме з'єднання з VIES базою
                        </li>
                        <li class="list-group-item">
                            <i class="bi bi-globe text-info"></i> Перевірка санкцій в 195 країнах
                        </li>
                        <li class="list-group-item">
                            <i class="bi bi-gear text-primary"></i> API для автоматизації
                        </li>
                        <li class="list-group-item">
                            <i class="bi bi-file-earmark-check text-secondary"></i> Повні звіти в PDF
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <!-- FAQ Section -->
    {% if page.faq %}
    <div class="row justify-content-center mb-5">
        <div class="col-lg-8">
            <h2 class="mb-4">Часті запитання</h2>
            <div class="accordion" id="faqAccordion">
                {% for item in page.faq %}
                <div class="accordion-item">
                    <h2 class="accordion-header">
                        <button class="accordion-button {% if loop.first %}{% else %}collapsed{% endif %}" 
                                type="button" 
                                data-bs-toggle="collapse" 
                                data-bs-target="#faq{{ loop.index }}">
                            {{ item.question }}
                        </button>
                    </h2>
                    <div id="faq{{ loop.index }}" 
                         class="accordion-collapse collapse {% if loop.first %}show{% endif %}" 
                         data-bs-parent="#faqAccordion">
                        <div class="accordion-body">
                            {{ item.answer }}
                        </div>
                    </div>
                </div>
                {% endfor %}
            </div>
        </div>
    </div>
    {% endif %}

    <!-- Process Section -->
    <div class="row justify-content-center mb-5">
        <div class="col-lg-8">
            <h2 class="mb-4">Як це працює?</h2>
            <div class="row">
                <div class="col-md-4 text-center mb-4">
                    <div class="mb-3">
                        <span class="badge bg-primary rounded-circle p-3" style="font-size: 1.5rem;">1</span>
                    </div>
                    <h5>Введіть дані</h5>
                    <p class="text-muted">Введіть VAT-номер або назву компанії</p>
                </div>
                <div class="col-md-4 text-center mb-4">
                    <div class="mb-3">
                        <span class="badge bg-primary rounded-circle p-3" style="font-size: 1.5rem;">2</span>
                    </div>
                    <h5>Миттєва перевірка</h5>
                    <p class="text-muted">VIES + Санкції + БД перевірка</p>
                </div>
                <div class="col-md-4 text-center mb-4">
                    <div class="mb-3">
                        <span class="badge bg-primary rounded-circle p-3" style="font-size: 1.5rem;">3</span>
                    </div>
                    <h5>Отримайте звіт</h5>
                    <p class="text-muted">Детальний звіт в PDF</p>
                </div>
            </div>
        </div>
    </div>

    <!-- CTA Section -->
    <div class="row justify-content-center mb-5">
        <div class="col-lg-8">
            <div class="card bg-light">
                <div class="card-body text-center py-5">
                    <h3 class="mb-3">Почніть безпечно перевіряти партнерів сьогодні</h3>
                    <p class="text-muted mb-4">Перша перевірка - абсолютно безплатна. Без кредитної картки.</p>
                    <a href="{{ url_for('verification.create') }}" class="btn btn-primary btn-lg">
                        <i class="bi bi-check2-circle"></i> {{ page.cta_button }}
                    </a>
                </div>
            </div>
        </div>
    </div>

    <!-- Related Pages Section for Internal Linking -->
    <div class="row justify-content-center mt-5 pt-5 border-top">
        <div class="col-lg-8">
            <h3 class="mb-4">Related Guides</h3>
            
            <!-- Dynamic Related Pages -->
            {% if related_pages %}
            <div class="row">
                {% for related in related_pages[:2] %}
                <div class="col-md-6 mb-3">
                    <div class="card h-100">
                        <div class="card-body">
                            <h5 class="card-title">{{ related.h1 }}</h5>
                            <p class="card-text text-muted small">{{ related.meta_description[:100] }}...</p>
                            <a href="{{ url_for('programmatic.vat_check_page', slug=related.slug) }}" class="btn btn-outline-primary btn-sm">
                                View Guide →
                            </a>
                        </div>
                    </div>
                </div>
                {% endfor %}
            </div>
            {% endif %}

            <!-- Related by Business Type -->
            <div class="mb-4 mt-4">
                <h5 class="text-muted small">Other cities for {{ page.business_type | title }}:</h5>
                <div class="btn-group btn-group-sm flex-wrap gap-2" role="group">
                    <a href="{{ url_for('programmatic.vat_check_page', slug='gmbh-berlin') }}" class="btn btn-outline-secondary">Berlin</a>
                    <a href="{{ url_for('programmatic.vat_check_page', slug='gmbh-munich') }}" class="btn btn-outline-secondary">Munich</a>
                    <a href="{{ url_for('programmatic.vat_check_page', slug='gmbh-frankfurt') }}" class="btn btn-outline-secondary">Frankfurt</a>
                    <a href="{{ url_for('programmatic.vat_check_page', slug='gmbh-hamburg') }}" class="btn btn-outline-secondary">Hamburg</a>
                    <a href="{{ url_for('programmatic.vat_check_page', slug='gmbh-cologne') }}" class="btn btn-outline-secondary">Cologne</a>
                </div>
            </div>

            <!-- GEO Pages -->
            <div class="mb-4 mt-4">
                <h5 class="text-muted small">Compliance & Legal Guides:</h5>
                <div class="btn-group btn-group-sm flex-wrap gap-2" role="group">
                    <a href="{{ url_for('geo.compliance_germany') }}" class="btn btn-outline-secondary">Compliance Germany</a>
                    <a href="{{ url_for('geo.sme_trust') }}" class="btn btn-outline-secondary">SME Trust</a>
                    <a href="{{ url_for('geo.eu_vat_rules') }}" class="btn btn-outline-secondary">EU VAT Rules</a>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}
