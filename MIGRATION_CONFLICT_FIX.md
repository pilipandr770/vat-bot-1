# üö® –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–∞ –º–∏–≥—Ä–∞—Ü–∏–π –Ω–∞ Render.com

## –ü—Ä–æ–±–ª–µ–º–∞
```
ERROR [flask_migrate] Error: Can't locate revision identified by '6191a483e0ab'
```

Production –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —Å—Å—ã–ª–∞–µ—Ç—Å—è –Ω–∞ –º–∏–≥—Ä–∞—Ü–∏—é, –∫–æ—Ç–æ—Ä–æ–π –Ω–µ—Ç –≤ –∫–æ–¥–µ.

---

## ‚úÖ –ë—ã—Å—Ç—Ä–æ–µ —Ä–µ—à–µ–Ω–∏–µ (–≤—ã–ø–æ–ª–Ω–∏—Ç—å –≤ Render Shell)

### –®–∞–≥ 1: –û—Ç–∫—Ä—ã—Ç—å Shell
1. Dashboard ‚Üí vat-bot-1 ‚Üí Shell (–≤ –ª–µ–≤–æ–º –º–µ–Ω—é)

### –®–∞–≥ 2: –í—ã–ø–æ–ª–Ω–∏—Ç—å –∫–æ–º–∞–Ω–¥—ã

**–í–∞—Ä–∏–∞–Ω—Ç A - –ï—Å–ª–∏ —Ç–∞–±–ª–∏—Ü—ã –ù–ï —Å—É—â–µ—Å—Ç–≤—É—é—Ç –∏–ª–∏ –±–∞–∑–∞ –ø—É—Å—Ç–∞—è:**
```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –Ω–∞ –Ω–∞—á–∞–ª—å–Ω—É—é –º–∏–≥—Ä–∞—Ü–∏—é
flask db stamp 361def0cfaed

# –ü—Ä–∏–º–µ–Ω–∏—Ç—å –≤—Å–µ –º–∏–≥—Ä–∞—Ü–∏–∏ –ø–æ –ø–æ—Ä—è–¥–∫—É
flask db upgrade
```

**–í–∞—Ä–∏–∞–Ω—Ç B - –ï—Å–ª–∏ –≤—Å–µ —Ç–∞–±–ª–∏—Ü—ã –£–ñ–ï —Å—É—â–µ—Å—Ç–≤—É—é—Ç:**
```bash
# –ü—Ä–æ—Å—Ç–æ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∏—Å—Ç–æ—Ä–∏—é
flask db stamp head
```

**–í–∞—Ä–∏–∞–Ω—Ç C - –ï—Å–ª–∏ –Ω–∏—á–µ–≥–æ –Ω–µ –ø–æ–º–æ–≥–∞–µ—Ç (–∫—Ä–∞–π–Ω–∏–π —Å–ª—É—á–∞–π):**
```bash
# –ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ PostgreSQL
psql $DATABASE_URL

# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Ç–µ–∫—É—â—É—é —Ä–µ–≤–∏–∑–∏—é
SELECT * FROM alembic_version;

# –£–¥–∞–ª–∏—Ç—å –Ω–µ–≤–µ—Ä–Ω—É—é —Ä–µ–≤–∏–∑–∏—é
DELETE FROM alembic_version;

# –í—ã–π—Ç–∏
\q

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—É—é —Ä–µ–≤–∏–∑–∏—é
flask db stamp head
```

### –®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å
```bash
# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Ç–µ–∫—É—â—É—é —Ä–µ–≤–∏–∑–∏—é
flask db current

# –î–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å: af13f0999271 (head)
```

---

## üìã –ö–∞–∫–∏–µ –º–∏–≥—Ä–∞—Ü–∏–∏ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –ø—Ä–∏–º–µ–Ω–µ–Ω—ã:

1. **361def0cfaed** - Initial migration (–±–∞–∑–æ–≤—ã–µ —Ç–∞–±–ª–∏—Ü—ã)
2. **cd954586ac25** - OSINT tables
3. **c8560cadc898** - CRM: user_id –≤ counterparties/companies
4. **af13f0999271** - Company Profile: 4 –ø–æ–ª—è –≤ users (—Ç–µ–∫—É—â–∞—è, head)

---

## üîÑ –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

1. –í–µ—Ä–Ω–∏—Ç–µ—Å—å –≤ **Settings** ‚Üí **Build & Deploy**
2. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ Start Command:
   ```
   flask db upgrade && gunicorn wsgi:app --bind 0.0.0.0:$PORT --workers 2 --timeout 120
   ```
3. **Manual Deploy** ‚Üí **Deploy latest commit**

---

## ‚ö†Ô∏è –ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ –ø–æ–≤—Ç–æ—Ä—è–µ—Ç—Å—è

–í–æ–∑–º–æ–∂–Ω–æ, –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö –µ—Å—Ç—å —Å—Ç–∞—Ä–∞—è —Ç–∞–±–ª–∏—Ü–∞ `alembic_version` —Å –Ω–µ–≤–µ—Ä–Ω–æ–π —Ä–µ–≤–∏–∑–∏–µ–π.

**–ü—Ä–æ–≤–µ—Ä–∏—Ç—å:**
```sql
SELECT * FROM alembic_version;
```

**–ò—Å–ø—Ä–∞–≤–∏—Ç—å:**
```sql
DELETE FROM alembic_version;
```

–ó–∞—Ç–µ–º –∑–∞–ø—É—Å—Ç–∏—Ç—å `flask db stamp head`.

---

## üìû –ù—É–∂–Ω–∞ –ø–æ–º–æ—â—å?

–°–∫–æ–ø–∏—Ä—É–π—Ç–µ –≤—ã–≤–æ–¥ —ç—Ç–∏—Ö –∫–æ–º–∞–Ω–¥:
```bash
flask db current
flask db heads
psql $DATABASE_URL -c "SELECT * FROM alembic_version;"
```
